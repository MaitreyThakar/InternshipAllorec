<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InternAI - Multi-Agent Allocation System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- Authentication Overlay -->
        <div id="auth-overlay" class="auth-overlay" onclick="closeAuthOverlay(event)">
            <div class="auth-container" onclick="event.stopPropagation()">
                <button class="auth-close-btn" onclick="closeAuthOverlay()">
                    <i class="fas fa-times"></i>
                </button>
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="showAuthTab('signin')">Sign In</button>
                    <button class="auth-tab" onclick="showAuthTab('signup')">Sign Up</button>
                </div>
                
                <!-- Sign In Form -->
                <div id="signin-form" class="auth-form active">
                    <h2>Welcome Back</h2>
                    <p>Sign in to your InternAI account</p>
                    <form id="signin-form-element">
                        <div class="form-group">
                            <label for="signin-email">Email</label>
                            <input type="email" id="signin-email" required>
                        </div>
                        <div class="form-group">
                            <label for="signin-password">Password</label>
                            <input type="password" id="signin-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary auth-btn">Sign In</button>
                    </form>
                </div>
                
                <!-- Sign Up Form -->
                <div id="signup-form" class="auth-form">
                    <h2>Create Account</h2>
                    <p>Join InternAI to manage internships</p>
                    <form id="signup-form-element">
                        <div class="form-group">
                            <label for="signup-name">Full Name</label>
                            <input type="text" id="signup-name" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-email">Email</label>
                            <input type="email" id="signup-email" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-password">Password</label>
                            <input type="password" id="signup-password" required>
                        </div>
                        <div class="form-group">
                            <label for="signup-confirm-password">Confirm Password</label>
                            <input type="password" id="signup-confirm-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary auth-btn">Sign Up</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">
                <i class="fas fa-brain"></i>
                <span class="brand-text">InternAI</span>
                <span class="brand-subtitle">Multi-Agent Allocation System</span>
            </div>
            <div class="nav-links">
                <a href="#" class="nav-link active" data-page="dashboard">
                    <i class="fas fa-home"></i>
                    Dashboard
                </a>
                <a href="#" class="nav-link" data-page="students">
                    <i class="fas fa-users"></i>
                    Students
                </a>
                <a href="#" class="nav-link" data-page="companies">
                    <i class="fas fa-building"></i>
                    Companies
                </a>
                <a href="#" class="nav-link" data-page="allocation">
                    <i class="fas fa-bolt"></i>
                    AI Allocation
                </a>
                <a href="#" class="nav-link" data-page="logs">
                    <i class="fas fa-file-alt"></i>
                    AI Logs
                </a>
            </div>
            <div class="nav-user">
                <div class="user-info" id="user-info" style="display: none;">
                    <span id="user-name">John Doe</span>
                    <button class="btn btn-secondary btn-sm" onclick="signOut()">Sign Out</button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="page-header">
                    <h1><i class="fas fa-brain"></i> InternAI Dashboard</h1>
                    <p>Multi-Agent AI system for intelligent internship allocation and recommendation. Powered by advanced Gemini models for optimal student-company matching.</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-students">3</h3>
                            <p>Total Students</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-companies">3</h3>
                            <p>Companies</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="open-positions">4</h3>
                            <p>Open Positions</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="ai-allocations">3</h3>
                            <p>AI Allocations</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3><i class="fas fa-chart-line"></i> Allocation Status</h3>
                        <div class="status-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Approved</span>
                            <span class="status-count">0</span>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <h3><i class="fas fa-brain"></i> Recent AI Activity</h3>
                        <div class="activity-item">
                            <div class="activity-dot"></div>
                            <span>Allocation Optimizer: Optimize Allocations</span>
                            <span class="activity-time">21365ms</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Students Page -->
            <div id="students" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-users"></i> Students</h1>
                    <p>Manage student profiles for internship allocation.</p>
                    <button class="btn btn-primary" onclick="showAddStudentModal()">
                        <i class="fas fa-plus"></i> Add Student
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="students-total">3</h3>
                            <p>Total Students</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="high-gpa-count">3</h3>
                            <p>High GPA (3.5+)</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="avg-gpa">3.77</h3>
                            <p>Average GPA</p>
                        </div>
                    </div>
                </div>

                <div class="students-list" id="students-list">
                    <!-- Students will be dynamically loaded here -->
                </div>
            </div>

            <!-- Companies Page -->
            <div id="companies" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-building"></i> Companies</h1>
                    <p>Manage company profiles and internship opportunities.</p>
                    <button class="btn btn-primary" onclick="showAddCompanyModal()">
                        <i class="fas fa-plus"></i> Add Company
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="companies-total">3</h3>
                            <p>Total Companies</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="companies-positions">4</h3>
                            <p>Open Positions</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="companies-locations">3</h3>
                            <p>Locations</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-industry"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="companies-industries">3</h3>
                            <p>Industries</p>
                        </div>
                    </div>
                </div>

                <div class="companies-list" id="companies-list">
                    <!-- Companies will be dynamically loaded here -->
                </div>
            </div>

            <!-- AI Allocation Page -->
            <div id="allocation" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-bolt"></i> AI Allocation</h1>
                    <p>Intelligent internship allocation using multi-agent AI system.</p>
                </div>

                <div class="allocation-controls">
                    <button class="btn btn-primary" onclick="startAllocation()">
                        <i class="fas fa-play"></i> Start Allocation
                    </button>
                    <button class="btn btn-secondary" onclick="optimizeAllocation()">
                        <i class="fas fa-cogs"></i> Optimize Allocations
                    </button>
                </div>

                <div class="agents-grid">
                    <div class="agent-card">
                        <h3><i class="fas fa-user-graduate"></i> Student Analyzer</h3>
                        <p>Analyzes student profiles, skills, and academic background</p>
                        <div class="agent-status" id="student-analyzer-status">Ready</div>
                    </div>
                    <div class="agent-card">
                        <h3><i class="fas fa-handshake"></i> Company Matcher</h3>
                        <p>Matches students with company requirements and culture</p>
                        <div class="agent-status" id="company-matcher-status">Ready</div>
                    </div>
                    <div class="agent-card">
                        <h3><i class="fas fa-cogs"></i> Allocation Optimizer</h3>
                        <p>Creates optimal internship assignments using constraint satisfaction</p>
                        <div class="agent-status" id="allocation-optimizer-status">Ready</div>
                    </div>
                    <div class="agent-card">
                        <h3><i class="fas fa-balance-scale"></i> Conflict Resolver</h3>
                        <p>Handles conflicts and ensures fair allocation</p>
                        <div class="agent-status" id="conflict-resolver-status">Ready</div>
                    </div>
                </div>

                <div class="allocation-results" id="allocation-results">
                    <!-- Allocation results will be displayed here -->
                </div>
            </div>

            <!-- AI Logs Page -->
            <div id="logs" class="page">
                <div class="page-header">
                    <h1><i class="fas fa-file-alt"></i> AI Activity Logs</h1>
                    <p>Monitor and analyze the decision-making process of our AI agents.</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="total-logs">7</h3>
                            <p>Total Logs</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="successful-logs">7</h3>
                            <p>Successful</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="error-logs">0</h3>
                            <p>Errors</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="ai-agents">3</h3>
                            <p>AI Agents</p>
                        </div>
                    </div>
                </div>

                <div class="logs-controls">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search logs..." id="log-search">
                    </div>
                    <select id="agent-filter">
                        <option value="all">All Agents</option>
                        <option value="student-analyzer">Student Analyzer</option>
                        <option value="company-matcher">Company Matcher</option>
                        <option value="allocation-optimizer">Allocation Optimizer</option>
                        <option value="conflict-resolver">Conflict Resolver</option>
                    </select>
                    <select id="status-filter">
                        <option value="all">All Status</option>
                        <option value="success">Success</option>
                        <option value="error">Error</option>
                        <option value="processing">Processing</option>
                    </select>
                    <button class="btn btn-primary" onclick="exportLogs()">
                        <i class="fas fa-download"></i> Export
                    </button>
                    <button class="btn btn-danger" onclick="clearLogs()">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>

                <div class="logs-info">
                    <p>Showing <span id="logs-count">7</span> of <span id="total-logs-count">7</span> logs</p>
                </div>

                <div class="logs-list" id="logs-list">
                    <!-- Logs will be dynamically loaded here -->
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="add-student-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Student</h2>
                <span class="close" onclick="closeModal('add-student-modal')">&times;</span>
            </div>
            <form id="add-student-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="student-name">Name *</label>
                        <input type="text" id="student-name" required>
                    </div>
                    <div class="form-group">
                        <label for="student-email">Email *</label>
                        <input type="email" id="student-email" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="student-major">Major *</label>
                        <input type="text" id="student-major" required>
                    </div>
                    <div class="form-group">
                        <label for="student-year">Year *</label>
                        <select id="student-year" required>
                            <option value="Freshman">Freshman</option>
                            <option value="Sophomore">Sophomore</option>
                            <option value="Junior">Junior</option>
                            <option value="Senior">Senior</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="student-gpa">GPA *</label>
                        <input type="number" id="student-gpa" step="0.01" min="0" max="4" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="student-skills">Skills (comma-separated) *</label>
                    <input type="text" id="student-skills" placeholder="React, Python, JavaScript, etc." required>
                </div>
                <div class="form-group">
                    <label for="student-interests">Interests (comma-separated)</label>
                    <input type="text" id="student-interests" placeholder="AI/ML, Web Development, Data Science, etc.">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-student-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Student</button>
                </div>
            </form>
        </div>
    </div>

    <div id="add-company-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Company</h2>
                <span class="close" onclick="closeModal('add-company-modal')">&times;</span>
            </div>
            <form id="add-company-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="company-name">Company Name *</label>
                        <input type="text" id="company-name" required>
                    </div>
                    <div class="form-group">
                        <label for="company-industry">Industry *</label>
                        <input type="text" id="company-industry" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="company-location">Location *</label>
                        <input type="text" id="company-location" required>
                    </div>
                    <div class="form-group">
                        <label for="company-size">Company Size *</label>
                        <select id="company-size" required>
                            <option value="Startup (1-50 employees)">Startup (1-50 employees)</option>
                            <option value="Small (51-200 employees)">Small (51-200 employees)</option>
                            <option value="Medium (201-1000 employees)">Medium (201-1000 employees)</option>
                            <option value="Large (1000+ employees)">Large (1000+ employees)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="company-description">Description *</label>
                    <textarea id="company-description" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="company-positions">Open Positions *</label>
                    <input type="number" id="company-positions" min="1" required>
                </div>
                <div class="form-group">
                    <label for="company-requirements">Requirements (comma-separated)</label>
                    <input type="text" id="company-requirements" placeholder="Python, React, Machine Learning, etc.">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-company-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Company</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Firebase integration included above -->
    <script type="module">
    // Import Firebase modules
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, addDoc, getDocs, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
    import { getDatabase, ref, set, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
  
    // Your Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyCLMtTwBa3aJdXjbMiO5MHay0PdAc-UTeM",
        authDomain: "internai-allocation-system.firebaseapp.com",
        databaseURL: "https://internai-allocation-system-default-rtdb.firebaseio.com",
        projectId: "internai-allocation-system",
        storageBucket: "internai-allocation-system.firebasestorage.app",
        messagingSenderId: "937130886247",
        appId: "1:937130886247:web:bcba0f274abae2dc9280c2",
        measurementId: "G-TJ3DZ8YL6T"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const rtdb = getDatabase(app);
    const auth = getAuth(app);
  
    // Make Firebase available globally
    window.firebase = { db, rtdb, auth, collection, addDoc, getDocs, onSnapshot, ref, set, onValue };
    
    // Initialize Firebase service
    window.firebaseService = {
        async addStudent(student) {
            try {
                const docRef = await addDoc(collection(db, 'students'), {
                    ...student,
                    created_at: new Date(),
                    updated_at: new Date()
                });
                console.log('Student added with ID: ', docRef.id);
                return docRef.id;
            } catch (error) {
                console.error('Error adding student: ', error);
                throw error;
            }
        },
        
        async getStudents() {
            try {
                const querySnapshot = await getDocs(collection(db, 'students'));
                const students = [];
                querySnapshot.forEach((doc) => {
                    students.push({ id: doc.id, ...doc.data() });
                });
                return students;
            } catch (error) {
                console.error('Error getting students: ', error);
                throw error;
            }
        },
        
        async addLog(agent, message, status) {
            try {
                const docRef = await addDoc(collection(db, 'ai_logs'), {
                    agent,
                    message,
                    status,
                    timestamp: new Date()
                });
                console.log('Log added with ID: ', docRef.id);
                return docRef.id;
            } catch (error) {
                console.error('Error adding log: ', error);
                throw error;
            }
        },
        
        async getLogs() {
            try {
                const querySnapshot = await getDocs(collection(db, 'ai_logs'));
                const logs = [];
                querySnapshot.forEach((doc) => {
                    logs.push({ id: doc.id, ...doc.data() });
                });
                return logs.sort((a, b) => b.timestamp - a.timestamp);
            } catch (error) {
                console.error('Error getting logs: ', error);
                throw error;
            }
        },
        
        async addCompany(company) {
            try {
                const docRef = await addDoc(collection(db, 'companies'), {
                    ...company,
                    created_at: new Date(),
                    updated_at: new Date()
                });
                console.log('Company added with ID: ', docRef.id);
                return docRef.id;
            } catch (error) {
                console.error('Error adding company: ', error);
                throw error;
            }
        },
        
        async getCompanies() {
            try {
                const querySnapshot = await getDocs(collection(db, 'companies'));
                const companies = [];
                querySnapshot.forEach((doc) => {
                    companies.push({ id: doc.id, ...doc.data() });
                });
                return companies;
            } catch (error) {
                console.error('Error getting companies: ', error);
                throw error;
            }
        }
    };
  </script>
    <script src="config.js"></script>
    <script src="demo-data.js"></script>
    <script src="script.js"></script>
</body>
</html>
